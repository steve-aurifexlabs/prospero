<!doctype html>
<html lang="en">
<head>
    <meta charset="utf8">
    <link rel="shortcut icon" type="image/x-icon" href="data:image/x-icon;base64,AAABAAEAICAAAAEAGACoDAAAFgAAACgAAAAgAAAAQAAAAAEAGAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADT1NLT1NLT1NLT1NLT1NLT1NLT1NLT1NLT1NLT1NLT1NLT1NLT1NLT1NLT1NLT1NLT1NLU1dPU1dPU1dPU1dPT1NLT1NLT1NLT1NLT1NLT1NLT1NLT1NLT1NLT1NLT1NLT1NHT1NHT1NHT1NHT1NLT1NLT1NLT1NLT1NLT1NLT1NLT1NHT1NHT1NHT1NHT1NHT1NLU1dPU1dPU1dPU1dPU1dPU1dPT1NHT1NLT1NLT1NLT1NLT1NLT1NHT1NHT1NHV1tLV1tLV1tLV1tLV1tLU1dPU1dPU1dPU1dPU1dPU1dPV1tLV1tLV1tLV1tLV1tLV1tLU1dPV1tTV1tTW19XW19XX2NbU1dHU1dHU1dHU1dHU1dHU1dHV1tLV1tLV1tLU1dHU1dHU1dHU1dHU1dHT1NLT1NLT1NLT1NLT1NLT1NHU1dHU1dHU1dHV1dHU1dHU1dLV1tTV1tXW19bW19bY2dfY2dfU1dHU1dHU1dHU1dHU1dHU1dHU1dHU1dHU1dHS1dTS1NTS1NTS1NTU1dPZ19PV19LP1NDT2NTU2NTR08/Z2NXY19TT08/a2dbQ0c/a3NrZ3OHX2t7Y29/i5Ofg4uLd39/X2NjY19bW1NPX1dTV2NPR1dDS1NTS1NTS1NTT1dPT1dPT1dPT1dPU1dPV09PW1tbb3d3a3d7d3eDh4OPV19fS1NPU1tXS1NTX2djg4N739vP08vDx8Ozt7urq6uXs7Ojf4+Lc3dvU0tHV1NLV1dHS1NDT1dPT1dPT1dPW1dHW1dHW1dHW1dHX1tTZ2dnh4t/o6Ofk4+Ld2tva2NrZ3NzT1dXS19bU1tbd3tz09PLd2M7RzcLc2c3OzMLT0cnq6OHi6ejb393S09HW1NPW1dHX1tLW1dHW1dHW1dHW1dHW1dHW1dHX1tLV1dLf4d3v8Ojn5t7o5t7y7+n18u/r7Oni4+Ph4uLp6efx8OvX08zCvK6zrZ6spZi5tKnb2dLx8u3a4N/X2tjS0tDX1dPW1dHX1tLW1dHW1dHW1dHW1dHW1dHW1dHX1tLV1dPi4+Lp6uLLyr++u7DDv7bIxbzl4dru7ejt7uny7+nh28+0raCppJewqpyzrZ/Uz8fw7+3k5+fX2tnU1tPU0tHW1NPU1NDS1tHW1dHW1dHW1dHU1dPU1dPV1tTV1tTS1NTd4OLz8fDx7eTu6t/l39bPysG7tqzBvrbRzsbOycC8s6WyqZiqppymoJPZ08jx7efs7e3M0NXc3NvX1tXY1tXX1dPS1dDS1tHU1dPU1dPU1dPT1NLT1NLT1NLT1NLU1dTW2Njc3t7g4ODp6efw8O3t7Onh39nFwLispZmtpZiro5apoZSxpZmropXQy8Lx8Ozj4+Xe4efc3uPV2dvR1tXX3djU1NHZ1tPU1tTU1dPU1dPU1dPU1dPU1dPU1dPV1tTT09LX19bY2dfW1tXc3Nzl5uT29fHj4dnCvLKrpJero5alnI+sopWimo3Fv7Pg3NXp5+Tu7evw7vHq7Oza3t3T2dfV2trS1NfT1NLT1NLT1NLW1NPW1NPW1NPW1NPV1NLW1dHa2tbS0tHU1dXZ29zb3d3s7ezg3tm/urClnpGooJOmnZCnn5C3saO3s6i4s6nEv7bGwbni2tTm49z8+/P1+PPm6+rT2NnU1dPU1dPU1dPW1dHW1dHW1dHW1dHV1dDV1dDZ2dXS09LW19fe3+Dl5ubt7OnNysKyraOlnpGnn5Knn5K5tKjd2dDu7OXk4tri3tXPzMC5r6LNxLfVzsPY1s3w8Ovf4d/W19XW19XV1tTV1NDV1NDV1NDV1NDV1dHR0s7W19TV1dTT09Pi4eLx7+/j39a2saerpJiooJKqopW2sKPc2dHy8e3m5ujn6Onu7urz8uvc1s/GwLjFwLfU0Mrs7OXk5uPV1tTV1tTV1tTV1NDV1NDV1NDV1NDU1NHR1dPV19XU1dLf3t7r6urq6OXOxrqooJOupZetpZexqZzUzsP18u7l5ejY2+Pb3uXV2Nri4+Hy9fb09PP7+/j29vTr7OvU2NfU1dPT1NLT1NLW1dHW1dHW1dHW1dHV1M7X1s/X2NbV19fe39/19PDSzMivqqKrpZinoJGsppjMx7zt6eHo6u7a3d3Y3NnV19LV1tPd3tzZ293U1tfU1tfZ29zY2tvS1NXW1dHW1dHW1dHW1dHW1dHW1dHW1dHX1dHX1dLV1tXU1tbp6ujr6OTHwrurpJmvqJurpZa4s6fl4dn59/LZ293W2NjT1tTV1tLU1dPS1NLZ2tnZ2tnY2tnY2tnV19bT1dTW1dHW1dHW1dHV1NDV1NDV1NDV1NDV1NHV09LV1NbY2trx8O7k4dnBvLGtpZeooZKppJbJxrzq6uXp6+nY29vV2NfT1NDT1NDU1dPU09HQ0c3T1NHV1tLS09DS08/T1NDW1dHW1dHV1NDV1NDV1NDV1NDV1NDU09DW1NTZ2dvf4OHs6+nd2tK1r6Omno+imo22safZ19Hq7evh5uXZ2trT09LT1NDT08/T0tDX1dTS08/S08/S08/S08/T1NDU1dHV1NDV1NDV1NDV1NDV1NDV1NDV1NDV1NHV09Lh4OHk5OXp5+TTzcavqJ2kno+ppJfKxb7q6eTp6+rR19XW1tTS08/V19LX1tLU0tHW1NPW1tLT08/T08/T1NDT1NDT08/V1NDV1NDV1NDV1NDV1NDV1NDV1NDX1tLQzszj4+Pj4uLt6ufGwLu0q6KloJLJxLrp493u7erg4+HU2tnU1dPT1NHR0szU1M/X1dPS0NDU08/V1NDV1NDV1NDV1NDV1NDV1NDV1NDV1NDV1NDV1NDV1NDV1NDW1dDT08/c393n6Ojo5uPNx8CupJm6r6PX1Mv29fXh4eHa29nX1dPW1dHW1dHV1NDV1NDV1NDV1NDV1NDV1NDV1NDV1NDV1NDV1NDV1NDV1NDV1NDV1NDV1NDV1NDV1NDV1NHT1NLb3d3g4uHt6+fX08m1q6HMxbrq5uHr7ezc3t7V1dXX2NXW1dHW1dHW1dHV1NDV1NDV1NDV1NDV1NDV1NDV1NDV1NDV1NDV1NDV1NDV1NDU08/U08/U08/U08/S08/S1dPa3dzg4uDv7enY08q4sabf29T39fDX2dnV19fS1NTS09LW1NDV1NDV1NDV1NDV1NDV1NDU08/U08/U08/U08/U08/U08/U08/U08/U08/U08/U08/U08/U08/S09DQ09HX2tjh4uDu7Ofg3dXPzMXz8+7f4N7a3dvQ0tLP0dHR09HU08/U08/U08/U08/U08/U08/U08/U08/U08/U08/U08/U08/U08/U08/U08/U08/U08/U08/U08/V1dDU1dDU1NDb3Nfo6OTt7err7Ofu7+zY2dTc3NrT1NHV1dLT09DU1M7U1M7U1M7U1M7U1M7U1M7U08/U08/U08/U08/U08/U08/U08/U08/U08/V1NDV1NDV1NDV1NDV1c/W1s7V1c3V1tDb3dre4uHc4N7Y2dXY2dPY19LU087V1M/V1dDV1c/V1c/V1c/W1tDW1tDW1tDV1NDV1NDV1NDV1NDV1NDV1NDV1NDV1NDV1NDV1c/V1c/V1c/V1c/V1c7V1c7V1c/W1dHY1tTY1tXY19XV1c/U1M7V1c/V1c/V1c/U1M7V1c/V1c/V1c/V1c/V1c/V1c/V1c/V1c/V1c/V1c/V1c/V1c/V1c/V1c/V1c/V1c/V1c/V1c/V1c/V1c7U1M3U1M7V1NDV09HW09PV1NHV1c/U1M7V1c/V1c/V1c/U1M7V1c/V1c/V1c/V1c/V1c/V1c/V1c/V1c/V1c/V1c/V1c/V1c/V1c/V1c/V1c/V1c/V1c/V1c/V1c/V1c/V1c/V1c/U1M/U08/U0tDU08/V1c/U1M7V1c/V1c/V1c/U1M7V1c/V1c/V1c/V1c/V1c/V1c/V1c/V1c/V1c/V1c/V1c/V1c/V1c/V1c/V1c/V1c/V1c/V1c/V1c/V1c/V1c/V1c/V1c/V1NDV1NDV1NDV1c/U1M7V1c/V1c/V1c/U1M7V1c/V1c/V1c/V1c/V1c/V1c/V1c/V1c/V1c/V1c/V1c/V1c/V1c/V1c/V1c8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA==">
    <title>Teams | Prospero.Live</title>
    <link href="https://fonts.googleapis.com/css2?family=Nunito&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Hind+Madurai&display=swap" rel="stylesheet"> 
</head>
<body>

<style>
@font-face {
    font-family: 'Averia Sans Libre';
    font-style: normal;
    font-weight: 400;
    font-display: fallback;
    src: local('Averia Sans Libre Regular'), local('AveriaSansLibre-Regular'), url('averiasanslibre.woff2') format('woff2');
    unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}

body { font-family: 'Nunito', sans-serif; }
button { font-family: 'Nunito', sans-serif; }
input { font-family: 'Nunito', sans-serif; }

body { background-color: rgb(245, 255, 243); }
body > * { background: repeat url(data:image/png;base64,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); }
body > * { outline: 1px dotted #444; }
body > * { padding: 1.5em; }
body > * { margin: 20px 10px; }

nav, footer { font-size: 75%; }
header a, footer a { padding: 0.25em; }
ul { list-style: none; padding-left: 0; margin-left: 15px; }
ul li::before { content: "- " }

button {
    padding: 5px;
    background-color: rgb(193, 251, 138);
    border-radius: 5px;
    border: 1px solid #ccc;
}

button:hover {
    background-color: rgb(171, 255, 92);
    cursor: pointer;
}

h2 {
    text-decoration: underline;
}
</style>

<header>
    <span style="float: right;">You are logged in as </span>
    <br>
    <b style="float: right;" name="email">Loading...</b>
    <br><br>
    <span style="float: right;" name="plan"></span>
    <br><br>
    <button style="float: right;" name="logout">Logout</button>

    <p style="margin: 0px; font-weight: 700; font-size: 400%; font-family: Hind Madurai;">Prospero.Live</p>
    
    
    <h1>Teams</h1>
</header>

<p>Teams are limited to 2 users currently.
    <!-- We will be adding additional features to support larger teams soon. -->
</p>

<form name="new-team">
    <label name="partner-email">Teammate Email</label>
    <br>
    <input type="text" name="partner-email">
    <br><br>
    <button style="font-size: 125%; padding: 0.5em;" type="submit">New Team</button>
    <p name="message"></p>
    <p>Your teammate will not be sent an email. Every user has to create an account and check for team invites on this page.</p>
</form>

<!-- <div name="teams-list"></div> -->

<footer>
    <p>
        <a href="/">Home</a>
        <a href="/terms-of-service" target="_blank">Terms of Service</a>
        <a href="/privacy-policy" target="_blank">Privacy Policy</a>
        <a href="mailto:contact@aurifexlabs.com">Contact</a>
        <span>Copyright 2020 Aurifex Labs LLC</span>
        <img style="float: right; margin: -30px -18px;" src="data:image/jpeg;base64,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">
    </p>
</footer>

<script>
    var user

    function hasInvitesChanged(done) {
        fetch('/api/user', {
            headers: {
                Authorization: 'Bearer ' + localStorage.sessionId,
            },
        }).then(function (response) {
            if (response.ok) {
                return response.json()
            }
            
            else {
                location.href = '/'
            }
        }).then(function(data) {
            if(data.plan == 'paid') {
                document.querySelector('header [name="plan"]').textContent = 'Paid Plan'
            }
            
            else {
                document.querySelector('header [name="plan"]').textContent = 'Free Plan'
            }

            if(JSON.stringify(user.invites) !== JSON.stringify(data.invites)) {
                done(true)
            }

            else {
                done(false)
            }
        })
    }
    
    window.addEventListener('DOMContentLoaded', function (event) {
        fetch('/api/user', {
            headers: {
                Authorization: 'Bearer ' + localStorage.sessionId,
            },
        }).then(function (response) {
            if (response.ok) {
                return response.json()
            }

            else if(response.status == 404) {
                location.href = '/create-account'
            }
            
            else {
                location.href = '/'
            }
        }).then(function(data) {
            user = data
            if(!user) {
                return
            }
            
            console.log('user:', user)
            
            loadPage()
        })
    })

    function loadPage() {
        var pollTimeout = 5000
        
        function poll() {
            if(pollTimeout < 30000) {
                pollTimeout += 50
            }

            hasInvitesChanged(function(changed) {
                if(changed) {
                    location.reload()
                }
            })
            
            setTimeout(poll, pollTimeout)
        }
        setTimeout(poll, pollTimeout)

        var form = document.querySelector('form[name="new-team"]')
        
        form.addEventListener('submit', function(event) {
            event.preventDefault()

            var message = form.querySelector('p[name="message"]')

            var email = form.querySelector('input[name="partner-email"]').value
            if (!email || !email.includes('@') || email.length > 254) {
                message.textContent = 'Please enter a valid email address.'
                return false
            }

            message.textContent = 'Sending request...'
            fetch('/api/newTeam?email=' + encodeURIComponent(email), {
                method: 'POST',
                headers: {
                    Authorization: 'Bearer ' + localStorage.sessionId,
                },
            }).then(function(response) {
                if(response.ok) {
                    // location.reload()
                    return response.json()
                }

                else if(response.status == 400) {
                    message.textContent = 'Error. Try again.'
                }

                else if(response.status == 401) {
                    location.href = '/'
                }
            }).then(function(data) {
                var teamShortId = data.teamId.slice(0, 4)
                // location.href = '/collaborate?id=' + teamShortId
                location.href = '/prospero-dev?id=' + teamShortId
            })

            return false
        })

        var logoutLink = document.querySelector('[name="logout"]')

        logoutLink.addEventListener('click', function (event) {
            event.preventDefault()

            fetch('/api/logout', {
                method: 'POST',
                headers: {
                    Authorization: 'Bearer ' + localStorage.sessionId,
                },
            }).then(function (response) {
                if (response.ok) {
                    delete localStorage.sessionId
                    location.href = '/'
                }
                
                else {
                    console.log('Logout failed.')
                }
            })

            return false
        })

        // var teamsList = document.querySelector('div[name="teams-list"]')
        var teamsList = document.querySelector('body')
        
        user.invites.forEach(function(team) {
            var teamString = ''
            team.members.forEach(function(email) {
                if(user.email != email) {
                    teamString += email + ', '
                }
            })
            
            var teamShortId = team.teamId.slice(0, 4)
            
            var button = document.createElement('button')
            button.style.margin = '10px'
            button.textContent = 'Accept'
        
            button.addEventListener('click', function(event) {
                fetch('/api/acceptInvite?teamId=' + encodeURIComponent(team.teamId), {
                    method: 'POST',
                    headers: {
                        Authorization: 'Bearer ' + localStorage.sessionId,
                    },
                }).then(function(response) {
                    if(response.ok) {
                        // location.href = '/collaborate?id=' + teamShortId
                        location.href = '/prospero-dev?id=' + teamShortId
                    }

                    else if(response.status == 401) {
                        location.href = '/'
                    }
                })
            })

            var button2 = document.createElement('button')
            button2.style.margin = '10px'
            button2.style.backgroundColor = '#faa'
            button2.textContent = 'Decline'
            button2.addEventListener('click', function(event) {
                fetch('/api/declineInvite?teamId=' + encodeURIComponent(team.teamId), {
                    method: 'POST',
                    headers: {
                        Authorization: 'Bearer ' + localStorage.sessionId,
                    },
                }).then(function(response) {
                    if(response.ok) {
                        location.reload()
                    }

                    else if(response.status == 401) {
                        location.href = '/'
                    }
                })
            })

            var p = document.createElement('p')
            p.appendChild(document.createTextNode(' Invite - ' + teamShortId + ': ' + teamString.slice(0, -2) + ' '))
            p.appendChild(button)
            p.appendChild(button2)
            
            teamsList.insertBefore(p, document.querySelector('body > footer'))
        })
        
        
        user.teams.forEach(function(team) {
            var teamString = ''
            team.members.forEach(function(email) {
                if(user.email != email) {
                    teamString += email + ', '
                }
            })

            if(team.members.length > 2) {
                teamString += ' and you'
            } 
            else if(team.members.length > 1) {
                teamString = teamString.slice(0, -2)
                teamString += ' and you'
            } else {
                teamString = 'Just you'
            }
            
            var teamShortId = team.teamId.slice(0, 4)

            var d = document.createElement('div')

            var h = document.createElement('h2')
            h.textContent = teamShortId
            d.appendChild(h)
            
            var p = document.createElement('p')
            p.textContent = teamString
            d.appendChild(p)

            var a = document.createElement('a')
            a.setAttribute('href', '/prospero-dev?id=' + teamShortId)
            a.textContent = 'Go to team page'
            d.appendChild(a)

            
            teamsList.insertBefore(d, document.querySelector('body > footer'))
        })

        document.querySelector('header [name="email"]').textContent = user.email
        if(user.plan == 'paid') {
            document.querySelector('header [name="plan"]').textContent = 'Paid Plan'
        }
        
        else {
            document.querySelector('header [name="plan"]').textContent = 'Free Plan'
        }
        // teamsList.style.display = 'block'
    }
</script>

</body>
</html>
        